(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{124:function(e,t,a){e.exports=a(149)},129:function(e,t,a){},131:function(e,t,a){},133:function(e,t){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(23),s=a.n(r),i=(a(129),a(111)),o=a(27),u=a(113),l=a(34),m=a(3),g=a.n(m),d=a(14),v=a(56),p=a(17),b=(a(131),a(197)),f=a(63),E=a(194),S=a(191),O=a(107),j=a.n(O);var I=function(){var e=Object(n.useState)({provider:null,signer:null,address:null,balance:null}),t=Object(p.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)({address:"0x48741D09A695c90174084925492a2a65e7CCe4d4",messageInput:"",contractSavingBtnStatus:"IDLE",valueInput:"",data:null,contractGetingBtnStatus:"IDLE",contractConnectingBtnLoading:!1,contract:null,events:[]}),i=Object(p.a)(s,2),o=i[0],u=i[1],m=function(){var e=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new f.a.providers.Web3Provider(window.ethereum),e.next=3,t.send("eth_requestAccounts",[]);case 3:return n=t.getSigner(),e.t0=r,e.t1=d.a,e.t2=Object(d.a)({},a),e.t3={},e.t4=t,e.t5=n,e.next=12,n.getAddress();case 12:return e.t6=e.sent,e.t7=f.a.utils,e.t8=t,e.next=17,n.getAddress();case 17:return e.t9=e.sent,e.next=20,e.t8.getBalance.call(e.t8,e.t9);case 20:e.t10=e.sent,e.t11=e.t7.formatEther.call(e.t7,e.t10),e.t12={provider:e.t4,signer:e.t5,address:e.t6,balance:e.t11},e.t13=(0,e.t1)(e.t2,e.t3,e.t12),(0,e.t0)(e.t13);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(v.a)(g.a.mark((function e(){var t,n,c,r,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.address,n=o.messageInput,c=Number(o.valueInput),t&&n&&c&&"number"===typeof c){e.next=5;break}return e.abrupt("return",u(Object(d.a)(Object(d.a)({},o),{},{contractSavingBtnStatus:"FAIL",messageInput:"",valueInput:""})));case 5:return u(Object(d.a)(Object(d.a)({},o),{},{contractSavingBtnStatus:"PROCESSING"})),r=["function setMessage(string calldata _message) external","function getMessage() public view returns(string memory)","function setData(string calldata _message, uint _value) external","function getData() public view returns(string memory, uint)","event MessageSaved(string message)","event DataSaved(string message, uint value)"],s=new f.a.Contract(t,r,a.provider),i=s.connect(a.signer),e.next=11,i.setData(n,c);case 11:u(Object(d.a)(Object(d.a)({},o),{},{contractSavingBtnStatus:"SUCCESS"}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(v.a)(g.a.mark((function e(){var t,n,c,r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=o.address)||u(Object(d.a)(Object(d.a)({},o),{},{contractGetingBtnStatus:"FAIL"})),u(Object(d.a)(Object(d.a)({},o),{},{contractGetingBtnStatus:"PROCESSING"})),n=["function setMessage(string calldata _message) external","function getMessage() public view returns(string memory)","function setData(string calldata _message, uint _value) external","function getData() public view returns(string memory, uint)","event MessageSaved(string message)","event DataSaved(string message, uint value)"],c=new f.a.Contract(t,n,a.provider),r=c.connect(a.signer),e.next=8,r.getData();case 8:s=e.sent,u(Object(d.a)(Object(d.a)({},o),{},{data:s,contractGetingBtnStatus:"SUCCESS"}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(Object(v.a)(g.a.mark((function e(){var t,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.signer&&(u(Object(d.a)(Object(d.a)({},o),{},{contractConnectingBtnLoading:!0})),t=o.address,n=["function setMessage(string calldata _message) external","function getMessage() public view returns(string memory)","function setData(string calldata _message, uint _value) external","function getData() public view returns(string memory, uint)","event MessageSaved(string message)","event DataSaved(string message, uint value)"],c=new f.a.Contract(t,n,a.provider),u(Object(d.a)(Object(d.a)({},o),{},{contract:c,contractConnectingBtnLoading:!1})),c.on("DataSaved",(function(e,t,a){u((function(t){return Object(d.a)(Object(d.a)({},t),{},{events:[{message:e}].concat(Object(l.a)(t.events))})}))})));case 1:case"end":return e.stop()}}),e)}))),[a.signer]),c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},a.signer?c.a.createElement("article",null,c.a.createElement("img",{src:"https://raw.githubusercontent.com/MetaMask/brand-resources/c3c894bb8c460a2e9f47c07f6ef32e234190a7aa/SVG/metamask-fox.svg",width:100}),c.a.createElement("div",null,a.address),c.a.createElement("div",null,a.balance," (eth)"),c.a.createElement(b.a,{variant:"contained",color:"primary"},"Connected")):c.a.createElement(b.a,{variant:"contained",color:"primary",onClick:m},"Connect to Metamask"),o.contract&&c.a.createElement("article",null,c.a.createElement("h2",null,"Interact with contract"),c.a.createElement("h3",{className:"contract-address"},"Contract address ",o.address),c.a.createElement("form",{autoComplete:"off",className:"set-data-to-contract"},c.a.createElement("h3",null,"Set data to contract:"),c.a.createElement(E.a,{id:"message",label:"Message",variant:"outlined",value:o.messageInput,onChange:function(e){u(Object(d.a)(Object(d.a)({},o),{},{messageInput:e.target.value}))}}),c.a.createElement(E.a,{id:"value",label:"Value",variant:"outlined",type:"number",value:o.valueInput,onChange:function(e){u(Object(d.a)(Object(d.a)({},o),{},{valueInput:e.target.value}))}}),function(){switch(o.contractSavingBtnStatus){case"IDLE":return c.a.createElement(b.a,{variant:"contained",color:"primary",onClick:O},"Save data to contract");case"PROCESSING":return c.a.createElement("div",{className:"button-loading"},c.a.createElement(b.a,{variant:"contained",disabled:!0},"Processing"),c.a.createElement(S.a,{className:"button-loading-second-ele",size:24}));case"SUCCESS":return c.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){u(Object(d.a)(Object(d.a)({},o),{},{contractSavingBtnStatus:"IDLE",messageInput:"",valueInput:""}))}},"Saving success");case"FAIL":return c.a.createElement(b.a,{variant:"contained",color:"secondary",onClick:function(){u(Object(d.a)(Object(d.a)({},o),{},{contractSavingBtnStatus:"IDLE",messageInput:"",valueInput:""}))}},"Saving fail")}}())),o.contract&&c.a.createElement("article",null,c.a.createElement("h3",null,"Get data from contract"),function(){switch(o.contractGetingBtnStatus){case"IDLE":return c.a.createElement(b.a,{variant:"contained",color:"primary",onClick:I},"Start get");case"PROCESSING":return c.a.createElement("div",{className:"button-loading"},c.a.createElement(b.a,{variant:"contained",disabled:!0},"Processing"),c.a.createElement(S.a,{className:"button-loading-second-ele",size:24}));case"SUCCESS":return c.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){u(Object(d.a)(Object(d.a)({},o),{},{contractGetingBtnStatus:"IDLE",messageInput:"",valueInput:"",data:null}))}},"Geting success");case"FAIL":return c.a.createElement(b.a,{variant:"contained",color:"secondary",onClick:function(){u(Object(d.a)(Object(d.a)({},o),{},{contractGetingBtnStatus:"IDLE",messageInput:"",valueInput:""}))}},"Geting fail")}}(),o.data&&c.a.createElement(j.a,{theme:"monokai",src:o.data})),o.contract&&c.a.createElement("article",{className:"events"},c.a.createElement("h3",null,"Events of contract"),o.events.map((function(e,t){return c.a.createElement("div",{key:t},"DataSaved Event with message: ",e.message)}))),o.contractConnectingBtnLoading&&c.a.createElement("div",{className:"button-loading"},c.a.createElement(b.a,{variant:"contained",disabled:!0},"Connecting to contract ..."),c.a.createElement(S.a,{className:"button-loading-second-ele",size:24}))))},C=function(){return c.a.createElement(i.a,null,c.a.createElement(u.a,null,c.a.createElement(n.Suspense,{fallback:c.a.createElement("span",null,"Loading...")},c.a.createElement(o.c,null,c.a.createElement(o.a,{exact:!0,path:"/",component:I})))))},h=a(195),w=a(196),x=a(199),D=new h.a({uri:"https://48p1r2roz4.sse.codesandbox.io",cache:new w.a});s.a.render(c.a.createElement(x.a,{client:D},c.a.createElement(C,null)),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.93c0124d.chunk.js.map